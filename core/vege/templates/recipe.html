{% extends 'base.html' %} {% block start %}

<div class="container mt-5">
  <form
    class="col-6 mx-auto card p-3 shadow-1g"
    method="post"
    enctype="multipart/form-data"
  >
    {% csrf_token %}
    <!--A CSRF token is a unique, unpredictable value that is generated by the server and sent to the client (typically in a hidden form field). When the client submits the form, the CSRF token must also be submitted. The server then verifies that the CSRF token is valid before processing the request.
      This helps to prevent CSRF attacks because the attacker cannot predict the CSRF token and therefore cannot forge a malicious request.-->
    <h2>Add Recipe</h2>
    <hr />
    <div class="mb-3">
      <label for="exampleInputEmail1" class="form-label">Recipe Name</label>
      <input name="recipe_name" class="form-control" required type="text" />
    </div>
    <div class="mb-3">
      <label for="exampleInputPassword1" class="form-label"
        >Recipe Description</label
      >
      <textarea
        class="form-control"
        name="recipe_description"
        required
      ></textarea>
    </div>

    <div class="mb-3">
      <label for="exampleInputPassword1">Recipe Image</label>
      <input name="recipe_image" type="file" class="form-control" />
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
  <hr>
  <div class="mt-5">
    <div class="mx-auto col 6">
      <form>

      <div class="mb-3">
        <label for="exampleInputEmail1" class="form-label">Search Food</label>
        <input
          name="search"
          class="form-control"
          required
          type="text"
        />
      </div>
      <button type="submit" class="btn btn-info">Search</button>
    </form>
    </div>
  </div>

      <table class="table mt-5" style="margin-left: 10px; margin-right: 10px">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Recipe Name</th>
            <th scope="col">Recipe Description</th>
            <th scope="col">Image</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          {% for i in recipes %}
          <tr>
            <th scope="row">{{forloop.counter}}</th>
            <td>{{ i.recipe_name}}</td>
            <td>{{ i.recipe_description}}</td>
            <td>
              <img src="/media/{{i.recipe_image}}" style="height: 120px" />
            </td>
            <td>
              <a href="/delete_recipe/{{i.id}}/" class="btn btn-danger m-2"
                >Delete</a
              >
              <a href="/update_recipe/{{i.id}}/" class="btn btn-success m-3"
                >Update</a
              >
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      {% endblock %}
    </div>
  </div>
</div>
